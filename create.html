<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>M√©mento IA ‚Äì ENSOSP | Cr√©ation de fiche</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Police Inter -->
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

  <!-- Styles ENSOSP -->
  <link rel="stylesheet" href="style.css" />

  <!-- Lib compression / QR code -->
  <script src="https://unpkg.com/pako@2.1.0/dist/pako.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>

  <!-- ========================================================= -->
  <!-- BARRE D'ONGLETS + Retour Accueil -->
  <!-- ========================================================= -->
  <nav class="tabs">
    <a href="index.html" class="tab">üè† Accueil</a>
    <a href="scan.html" class="tab">üì∑ Lecture QR</a>
    <a class="tab active">üìù Cr√©ation de fiche</a>
  </nav>

  <main>

    <h1 class="page-title">Cr√©ation de fiche op√©rationnelle IA</h1>

    <!-- Bouton r√©initialiser -->
    <button id="btnReset" class="btn-reset">üîÑ R√©initialiser tout</button>

    <!-- ========================================================= -->
    <!-- SECTION METADONN√âES -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>1. M√©tadonn√©es de la fiche</h2>

      <label>Cat√©gorie
        <input id="meta_categorie" type="text" placeholder="Ex : Risque chimique / op√©rationnel">
      </label>

      <label>Titre de la fiche
        <input id="meta_titre" type="text" placeholder="Ex : Analyse initiale d'un site RCH">
      </label>

      <label>Objectif
        <input id="meta_objectif" type="text" placeholder="Ex : Aider le RCH3/RCH4 dans l'analyse rapide">
      </label>

      <label>Concepteur
        <input id="meta_concepteur" type="text" placeholder="Ex : Cdt Tirelle">
      </label>

      <label>Version
        <input id="meta_version" type="text" placeholder="Ex : 1.0" value="1.0">
      </label>

      <label>Date de mise √† jour
        <input id="meta_date" type="date">
      </label>
    </section>

    <!-- ========================================================= -->
    <!-- INDICES DE CONFIANCE IA -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>2. Indices de confiance IA</h2>

      <label>ChatGPT
        <select id="aiChatGPT" class="indice-confiance">
          <option value="3">3 - Recommand√©e</option>
          <option value="2">2 - Acceptable</option>
          <option value="1">1 - Non recommand√©e</option>
        </select>
      </label>

      <label>Perplexity
        <select id="aiPerplexity" class="indice-confiance">
          <option value="3">3 - Recommand√©e</option>
          <option value="2">2 - Acceptable</option>
          <option value="1">1 - Non recommand√©e</option>
        </select>
      </label>

      <label>Mistral
        <select id="aiMistral" class="indice-confiance">
          <option value="3">3 - Recommand√©e</option>
          <option value="2">2 - Acceptable</option>
          <option value="1">1 - Non recommand√©e</option>
        </select>
      </label>
    </section>

    <!-- ========================================================= -->
    <!-- VARIABLES -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>3. Variables utilisables dans le prompt (max 10)</h2>

      <p class="helper">
        Exemple : variable ID <b>code_onu</b> ‚Üí utilisable dans le prompt avec <code>{{code_onu}}</code>
      </p>

      <div id="variablesContainer"></div>

      <button id="btnAddVariable" class="btn-add-var">‚ûï Ajouter une variable</button>
    </section>


    <!-- ========================================================= -->
    <!-- PROMPT -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>4. R√©daction du prompt</h2>
      <p class="helper">
        Limite : <strong>4000 caract√®res</strong> apr√®s compactage.<br>
        Utilisez les variables avec <code>{{identifiant}}</code>.
      </p>

      <textarea id="prompt_input" rows="10" placeholder="R√©digez le prompt ici‚Ä¶"></textarea>
      <div id="prompt_count" class="counter">0 / 4000</div>
    </section>

    <!-- ========================================================= -->
    <!-- GENERATION DU QR CODE -->
    <!-- ========================================================= -->
    <section class="card">
      <h2>5. G√©n√©ration du QR Code</h2>

      <button id="btnGenerate" class="btn-generate">üöÄ G√©n√©rer JSON + QR code</button>

      <div id="qrContainer" class="qr-box"></div>
    </section>

  </main>


  <!-- ========================================================= -->
  <!-- SCRIPTS UI -->
  <!-- ========================================================= -->
  <script type="module" src="./src/ui/createFiche.js"></script>

</body>
</html>
